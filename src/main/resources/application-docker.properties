##------------------------------------------------
## Docker Profile Configuration
##------------------------------------------------
spring.application.name=samplebackendsvc

# MongoDB Configuration for Docker
spring.data.mongodb.uri=mongodb://mongodb:27017/sampledb
spring.data.mongodb.database=sampledb

# Security (override with environment variables in production)
spring.security.user.name=${SPRING_SECURITY_USER_NAME:user}
spring.security.user.password=${SPRING_SECURITY_USER_PASSWORD:password}

# OpenAPI/Swagger Configuration
springdoc.api-docs.path=/api-docs
springdoc.packagesToScan=com.anr.controller, package2
springdoc.pathsToMatch=/v1, /api/v1/**
springdoc.swagger-ui.operationsSorter=method

# Jackson Configuration
spring.jackson.default-property-inclusion=NON_NULL

# Logging Configuration (INFO level for production-like environment)
logging.level.com.anr=INFO
logging.level.org.springframework.security=WARN
logging.level.org.springframework.web.filter.CommonsRequestLoggingFilter=INFO
logging.level.org.springframework.aop.interceptor.CustomizableTraceInterceptor=INFO
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} - %msg%n

# AOP Configuration
spring.aop.proxy-target-class=true

# Actuator Configuration
management.endpoint.beans.enabled=true
management.endpoint.health.enabled=true
management.endpoint.health.show-details=always
management.endpoints.web.exposure.include=health,info,metrics

# Application Properties
sbsvc.name=samplebackendsvc
sbsvc.description=Sample Backend Services - Dockerized
sbsvc.logStackTrace=true

# Wait periods and timeouts
sbsvc.waitperiod.apiDefaultService=200
sbsvc.waitperiod.apiSecondService=3000
sbsvc.waitperiod.hyxThrdPoolCoreSizeApi=40
sbsvc.waitperiod.apiDefServiceKey=defapi
sbsvc.waitperiod.apiSecondServiceKey=secapi
sbsvc.waitperiod.apiGroupKey=sbapi
sbsvc.waitperiod.repoDBCall01=method01
sbsvc.waitperiod.repoDBCall02=method02
sbsvc.waitperiod.repoGroupKey=dbCalls

# Circuit breaker config
sbsvc.waitperiod.hyxCbSleepWindowMS=1000
sbsvc.waitperiod.hyxCbReqVolmThreshold=20
sbsvc.waitperiod.hyxCbErrThresholdPercentage=50
sbsvc.waitperiod.hyxDefCircuitBrkrKey=test
sbsvc.waitperiod.hyxDefGroupKey=SBSvc

sbsvc.waitperiod.hyxAllowMaxSizToDiverge=false
sbsvc.waitperiod.hyxThrdPoolCoreSize=30
sbsvc.waitperiod.hyxThrdPoolMaxSize=10
sbsvc.waitperiod.hyxThrdPoolMaxQueSize=-1
sbsvc.waitperiod.hyxThrdPoolQueSizeRejThreshold=50

# Thread executor props
sbsvc.executor.corePoolSize=50
sbsvc.executor.maxPoolSize=500
sbsvc.executor.queueCapacity=1000
sbsvc.executor.threadNamePrefix="SBProcess-"

##------------------------------------------------
## Resilience4j Configuration
##------------------------------------------------
# Circuit Breaker defaults
resilience4j.circuitbreaker.configs.default.registerHealthIndicator=true
resilience4j.circuitbreaker.configs.default.slidingWindowSize=100
resilience4j.circuitbreaker.configs.default.minimumNumberOfCalls=20
resilience4j.circuitbreaker.configs.default.permittedNumberOfCallsInHalfOpenState=10
resilience4j.circuitbreaker.configs.default.automaticTransitionFromOpenToHalfOpenEnabled=true
resilience4j.circuitbreaker.configs.default.waitDurationInOpenState=1000ms
resilience4j.circuitbreaker.configs.default.failureRateThreshold=50
resilience4j.circuitbreaker.configs.default.eventConsumerBufferSize=10

# Time Limiter defaults
resilience4j.timelimiter.configs.default.timeoutDuration=200ms
resilience4j.timelimiter.configs.default.cancelRunningFuture=true

# Bulkhead defaults
resilience4j.bulkhead.configs.default.maxConcurrentCalls=30
resilience4j.bulkhead.configs.default.maxWaitDuration=0ms

# Thread Pool Bulkhead
resilience4j.thread-pool-bulkhead.configs.default.maxThreadPoolSize=40
resilience4j.thread-pool-bulkhead.configs.default.coreThreadPoolSize=30
resilience4j.thread-pool-bulkhead.configs.default.queueCapacity=100
resilience4j.thread-pool-bulkhead.configs.default.keepAliveDuration=20ms

##------------------------------------------------
## Java 21 Virtual Threads Configuration
##------------------------------------------------
# Enable virtual threads for improved I/O performance
spring.threads.virtual.enabled=true
